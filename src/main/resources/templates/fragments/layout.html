<!DOCTYPE html>
<html lang="cs-cz" xmlns:th="http://www.w3.org/1999/xhtml">

<head th:fragment="head">
    <meta charset="UTF-8">
    <meta name="description" content="Nutricni databaze - cvicební projekt."/>
    <meta name="keywords" content="cvičení projekt nutricni databaze spring boot mysql auatentifikace autorizace"/>
    <meta name="author" content="Marek Jiricek"/>

    <title>Nutriční databáze</title>

    <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" type="text/css"/>
    <link rel="shortcut icon" th:href="@{/images/apple.svg}"/>
</head>

<body>
<header th:fragment="header">
    <nav class="navbar navbar-expand-sm bg-dark" data-bs-theme="dark">
        <div class="container-fluid">
            <a th:href="@{/}" class="navbar-brand">NutrDB App</a>
            <div class="navbar-nav">
                <a th:href="@{/}" th:class="'nav-link ' + ${homeLink}">Domů</a>
                <a th:href="@{/foods}" th:class="'nav-link ' + ${foodsLink}">Potraviny</a>
                <a th:href="@{/account/login}" th:class="'nav-link ' + ${loginLink}">Přihlásit</a>
                <a th:href="@{/account/register}" th:class="'nav-link ' + ${registerLink}">Zaregistrovat</a>
                <form method="post"
                      th:action="@{account/logout}">
                    <button class="nav-link">Odhlásit</button>
                </form>
            </div>
        </div>

    </nav>
</header>

<div th:fragment="foodList" class="my-5 row justify-content-center">
    <h5 class="text-center text-secondary">Nebyly nalezeny žádné potraviny.</h5> <!-- th:if="${foods.isEmpty()}"  -->

    <div class="col-auto container">
        <table class="table"> <!-- th:if="${!foods.isEmpty()}" -->
            <thead>
            <tr>
                <th scope="col">Název potraviny</th>
                <th scope="col">Energie na 100 g</th>
                <th scope="col">Bílkovin na 100 g</th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
            <tr> <!-- th:each="food : ${foods}" -->
                <td>Ovesné vločky</td>
                <td th:text="'343' + ' kcal'"></td>
                <td th:text="'10.8' + ' g'"></td>
                <td>
                    <a th:href="@{'/foods/detail/1'}">Detail</a>
                    <span> | <a th:href="@{'/foods/edit/1'}">Upravit</a></span>
                    <span> | <a th:href="@{'/foods/delete/1'}">Smazat</a></span>
                </td>
            </tr>
            <tr> <!-- th:each="food : ${foods}" -->
                <td>Ovesné vločky</td>
                <td th:text="'343' + ' kcal'"></td>
                <td th:text="'10.8' + ' g'"></td>
                <td>
                    <a th:href="@{'/foods/detail/1'}">Detail</a>
                    <span> | <a th:href="@{'/foods/edit/1'}">Upravit</a></span>
                    <span> | <a th:href="@{'/foods/delete/1'}">Smazat</a></span>
                </td>
            </tr>
            <tr> <!-- th:each="food : ${foods}" -->
                <td>Ovesné vločky</td>
                <td th:text="'343' + ' kcal'"></td>
                <td th:text="'10.8' + ' g'"></td>
                <td>
                    <a th:href="@{'/foods/detail/1'}">Detail</a>
                    <span> | <a th:href="@{'/foods/edit/1'}">Upravit</a></span>
                    <span> | <a th:href="@{'/foods/delete/1'}">Smazat</a></span>
                </td>
            </tr>
            <tr> <!-- th:each="food : ${foods}" -->
                <td>Ovesné vločky</td>
                <td th:text="'343' + ' kcal'"></td>
                <td th:text="'10.8' + ' g'"></td>
                <td>
                    <a th:href="@{'/foods/detail/1'}">Detail</a>
                    <span> | <a th:href="@{'/foods/edit/1'}">Upravit</a></span>
                    <span> | <a th:href="@{'/foods/delete/1'}">Smazat</a></span>
                </td>
            </tr>
            <tr> <!-- th:each="food : ${foods}" -->
                <td>Ovesné vločky</td>
                <td th:text="'343' + ' kcal'"></td>
                <td th:text="'10.8' + ' g'"></td>
                <td>
                    <a th:href="@{'/foods/detail/1'}">Detail</a>
                    <span> | <a th:href="@{'/foods/edit/1'}">Upravit</a></span>
                    <span> | <a th:href="@{'/foods/delete/1'}">Smazat</a></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</div>

<ul th:with="currentPage=1, totalPages=8" th:fragment="pagination" class="pagination justify-content-center">
    <!-- first page -->
    <li th:if="${currentPage} gt 1" class="page-item"><a class="page-link" th:href="@{/foods?page=1}">1</a></li>
    <!-- inbetween -->
    <li th:if="${currentPage} gt 3" class="page-item disabled"><a class="page-link">...</a></li>
    <!-- previous page -->
    <li th:if="${currentPage gt 2}" class="page-item"><a th:href="@{'/foods?page=' + ${currentPage - 1}}"
                                                         th:text="${currentPage - 1}" class="page-link"></a></li>
    <!-- current page -->
    <li class="page-item active"><a th:text="${currentPage}" class="page-link" href=""></a></li>
    <!-- next page -->
    <li th:if="${currentPage + 1} lt ${totalPages}" class="page-item"><a
            th:href="@{'/foods?page=' + ${currentPage + 1}}" th:text="${currentPage + 1}" class="page-link"></a></li>
    <!-- inbetween -->
    <li th:if="${currentPage + 2} lt ${totalPages}" class="page-item disabled"><a class="page-link">...</a></li>
    <!-- last page -->
    <li th:if="${currentPage} lt ${totalPages}" class="page-item"><a th:href="@{'foods?page=' + ${totalPages}}"
                                                                     th:text="${totalPages}" class="page-link"></a></li>
</ul>

<form th:fragment="searchForm"
      method="get"
      th:action="@{/foods/search}">
    <div class="input-group">
        <input class="form-control" type="search" name="foodName" placeholder="Vyhledat potravinu..."/>
        <button class="btn btn-dark" type="submit">Hledat</button>
    </div>
</form>


<div th:fragment="foodForm (formAction, buttonName)" class="row justify-content-center">
    <form method="post"
          th:action="@{${formAction}}"
          class="col-auto container">
        <div class="py-2 alert alert-danger" th:if="${param.error}">Součet v gramech nesmí přesáhnout 100.</div>

        <div class="row align-items-center">
            <label for="name" class="col form-label">Název potraviny:</label>
            <div class="col">
                <input id="name" type="text" class="form-control"/>
                <small class="text-danger" th:text="'Název nemůže být prázdný.'"></small>
            </div>
        </div>

        <hr> <!-- hlavička tabulky -->
        <div class="row">
            <label class="col fw-bold">Výživový údaj</label>
            <div class="col fw-bold">na 100 g</div>
        </div>
        <hr>

        <div class="mb-2">
            <div class="row align-items-center">
                <label for="energy" class="col form-label">Energetická hodnota:</label>
                <div class="col">
                    <div class="input-group">
                        <input type="number" step="1.0" min="0" id="energy" class="form-control"/>
                        <span class="input-group-text">kcal</span>
                    </div>
                    <small class="text-danger" th:text="'Zadejte číslo od 0 do 100.'"></small>
                </div>
            </div>
        </div>

        <div class="mb-2">
            <div class="row align-items-center">
                <label for="protein" class="col form-label">Bílkoviny</label>
                <div class="col">
                    <div class="input-group">
                        <input type="number" step="0.1" min="0" id="protein" class="form-control"/>
                        <span class="input-group-text">g</span>
                    </div>

                    <small class="text-danger" th:text="'Zadejte číslo od 0 do 100.'"></small>
                </div>
            </div>

        </div>

        <div class="mb-2">
            <div class="row align-items-center">
                <label for="carbs" class="col form-label">Sacharidy</label>
                <div class="col">
                    <div class="input-group">
                        <input type="number" step="0.1" min="0" id="carbs" class="form-control"/>
                        <span class="input-group-text">g</span>
                    </div>

                    <small class="text-danger" th:text="'Zadejte číslo od 0 do 100.'"></small>
                </div>
            </div>
        </div>

        <div class="mb-2">
            <div class="row align-items-center">
                <label for="fats" class="col form-label">Tuky</label>
                <div class="col">
                    <div class="input-group">
                        <input type="number" step="0.1" min="0" id="fats" class="form-control"/>
                        <span class="input-group-text">g</span>
                    </div>

                    <small class="text-danger" th:text="'Zadejte číslo od 0 do 100.'"></small>
                </div>
            </div>
        </div>

        <div class="text-center">
            <button class="btn btn-dark" type="submit" th:text="${buttonName}"></button>
        </div>

        <hr>
    </form>
</div>


<footer th:fragment="footer">
    <hr>
    <p class="mx-5" xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><span
            property="dct:title">NutrDB App</span> by <span property="cc:attributionName">Marek Jiříček</span> is marked
        with <a href="http://creativecommons.org/publicdomain/zero/1.0?ref=chooser-v1" target="_blank"
                rel="license noopener noreferrer" style="display:inline-block;">CC0 1.0<img
                style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"
                src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img
                style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"
                src="https://mirrors.creativecommons.org/presskit/icons/zero.svg?ref=chooser-v1"></a></p>
</footer>
</body>
</html>